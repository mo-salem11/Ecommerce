<section class="container">
   <div class="progress-bar">
    <div class="row">
      <div class="col-1">
        <img src="./assets/account-frame.svg" alt="">
      </div>
      <div class="col-11">
        <div class="d-flex flex-column">
          <div class="me-auto text-wrap">
            <span class="fw-bold">Hala !</span> You are few steps away from personalizing your experience.
          </div>
          <div class="d-flex align-items-center flex-wrap">
            <div class="progress flex-fill">
              <div class="track"></div>
            </div>
            <div class="bg-main p-1 ms-2 text-white rounded-5">40%</div>
          </div>
        </div>
      </div>
    </div>
   </div>
   <div class="card my-4">
    <div class="card-header fw-medium">Profile Info</div>
    <div class="card-body">
      <form [formGroup]="updateFormData" (ngSubmit)="updateData(updateFormData)">
        <div class="mb-3">
          <label
            class="small mb-1 text-muted text-capitalize"
            for="inputUsername"
            >Username</label
          >
          <input
            class="form-control"
            id="inputUsername"
            type="text"
            placeholder="Enter your username"
            [readonly]="readonly"
            formControlName="name"
            [ngClass]="{
              'is-valid': !name && disabled,
              'is-invalid': name?.errors && name?.touched && disabled
            }"
          />
          <div *ngIf="name?.dirty" class="errorGroupe mb-3">
            <p *ngIf="name?.getError('maxlength')" class="alert alert-danger small p-0 px-1 m-0">
              Username must be at least 20
            </p>
            <p *ngIf="name?.getError('minlength')" class="alert alert-danger small p-0 px-1 m-0">
              Username must be at least 3 characters long
            </p>
          </div>
        </div>
        <div class="row gx-3 mb-1">
          <div class="col-md-6 mb-3">
            <label
              class="small mb-1 text-muted text-capitalize"
              for="inputemail"
              >email (you must change email to update)
            </label>
            <input
              class="form-control"
              id="inputemail"
              type="email"
              placeholder="Enter your email"
              formControlName="email"
              [readonly]="readonly"
            />
            <div *ngIf="email?.dirty" class="errorGroupe mb-3">
              <p *ngIf="email?.getError('email')"  class="alert alert-danger small p-0 px-1 m-0">
                your email not valid
              </p>
            </div>
          </div>

          <div class="col-md-6">
            <label
              class="small mb-1 text-muted text-capitalize"
              for="inputPhone"
              >phone</label
            >
            <input
              class="form-control"
              id="inputPhone"
              type="tel"
              placeholder="Enter your phone"
              [readonly]="readonly"
              formControlName="phone"

            />
            <div *ngIf="phone?.dirty" class="errorGroupe mb-3">
              <p *ngIf="phone?.getError('pattern')" class="alert alert-danger small p-0 px-1 m-0">
                Please enter a valid Egyptian phone number
              </p>
            </div>
          </div>
        </div>
        <button *ngIf="disabled" class="main-btn py-2 w-100"><span *ngIf="!isLoading" class="fw-bolder px-2">Save Changes</span><span *ngIf="isLoading">loading...</span></button>
      </form>
      <button
       *ngIf="readonly"
      (click)="removedisable()"
        type="menu"
        class="my-3  py-2 main-btn bg-warning text-capitalize  w-100"
      >
        <span class="fw-bolder px-2">update email & info</span>
      </button>
    </div>
  </div>

</section>
